/* Copyright (c) 2015 Michio Yokomizo (mrpepper023) control-structures.js is released under the MIT License, see https://github.com/mrpepper023/control-structures */var bind=function(t,n){return function(){return t.apply(n,arguments)}};!function(t,n){return t.cs=n()}(this,function(){var t,n;return t=function(t){return[].slice.call(t)},{y:function(t){return function(n){return function(){return t(n(n)).apply(this,arguments)}}(function(n){return function(){return t(n(n)).apply(this,arguments)}})},_:function(){var n,r;return n=t(arguments),r=n.shift(),this.y(function(r){return function(){var u,i;return u=n.shift(),null!=u?(i=t(arguments),i.unshift(r),u.apply(this,i)):void 0}}).apply(this,r)},_each:function(n,r,u,i){return function(e){var a,c,o,s,p,f,h,l,y,g;if(c="Array"===Object.prototype.toString.call(n).slice(8,-1),h=0,f=e(),c){for(l=[],a=o=0,p=n.length;p>o;a=++o)g=n[a],h++,l.push(u.apply(this,[g,a,function(){return f.apply(this,[h,i].concat(t(arguments)))}].concat(r)));return l}y=[];for(s in n)g=n[s],h++,y.push(u.apply(this,[s,g,function(){return f.apply(this,[h,i].concat(t(arguments)))}].concat(r)));return y}(function(){var n,r;return n=0,r=[],function(u,i){var e,a,c,o,s;if(n++,arguments.length>0)for(a=t(arguments),a.shift(),a.shift(),c=o=0,s=a.length;s>o;c=++o)e=a[c],r.length<=c&&r.push([]),r[c].push(e);return n===u?i.apply(this,r):void 0}})},_for:function(n,r,u,i,e,a){return this.y(function(i){return function(){return r(n)?e.apply(this,[n,function(){return a.apply(this,[n].concat(t(arguments)))},function(){return n=u(n),i.apply(this,arguments)}].concat(t(arguments))):a.apply(this,[n].concat(t(arguments)))}}).apply(this,i)},_for_in:function(n,r,u,i){var e,a,c;return e=-1,c="Array"===Object.prototype.toString.call(n).slice(8,-1),a=c?n.length:Object.keys(n).length,this.y(function(r){return function(){var o,s;return e+=1,a>e?c?u.apply(this,[n[e],e,function(){return i.apply(this,arguments)},function(){return r.apply(this,arguments)}].concat(t(arguments))):(o=Object.keys(n)[e],s=n[o],u.apply(this,[o,s,function(){return i.apply(this,arguments)},function(){return r.apply(this,arguments)}].concat(t(arguments)))):i.apply(this,arguments)}}).apply(this,r)},_while:function(n,r,u){return this.y(function(n){return function(){var i;return i=t(arguments),i.unshift(function(){return n.apply(this,arguments)}),i.unshift(function(){return u.apply(this,arguments)}),r.apply(this,i)}}).apply(this,n)},exc:n=function(){function n(){this._throw=bind(this._throw,this)}var r,u,i,e;return r=[],n.prototype._try=function(t,n,u,i,e,a){return r.push({e_array:u,_catch:i,_finally:e,next:a}),n.apply(this,t)},i=function(){var t;return r.length>0?(t=r.pop(),t._finally.apply(this,arguments)):void 0},n.prototype._finally=function(){var n;r.length>0&&(n=r.pop(),null!=n.next?n._finally.apply(this,[n.next].concat(t(arguments))):n._finally.apply(this,[function(){}].concat(t(arguments))))},e=function(t){return function(n){return function(){return t(n(n)).apply(this,arguments)}}(function(n){return function(){return t(n(n)).apply(this,arguments)}})},u=function(t,n){return e(function(r){return function(){return t(n,r)}})()},n.prototype._throw=function(n){var e,a;return e={},a=!1,u(function(u){return function(c,o){var s,p;return e=r.pop(),null==e?(a=!0,c()):(r.push(e),p=e.e_array.indexOf(n),-1===p?arguments.length<=2?i.call(u,o):(s=t(arguments),s.shift(),s.shift(),s.unshift(o),i.apply(u,s)):void e._catch.apply(u,[n].concat(t(arguments))))}}(this),function(){a&&(console.log("uncaught exception: "+n.toString()),process.exit(1))})},n}()}});